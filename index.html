<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Auto-Notification Tester</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: 'Arial', sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f4f7f9;
        color: #333;
        text-align: center;
    }
    .container {
        background: #ffffff;
        padding: 30px 40px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        max-width: 400px;
    }
    h1 {
        color: #3b82f6;
        margin-bottom: 20px;
        font-size: 24px;
    }
    button {
        padding: 12px 25px;
        background-color: #10b981; /* Green button */
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
        margin-top: 15px;
    }
    button:hover {
        background-color: #059669;
    }
    .status-message {
        margin-top: 25px;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
        background-color: #e3f2fd;
        font-size: 14px;
        color: #1e88e5;
    }
    .error {
        background-color: #ffebee;
        color: #d32f2f;
        border-color: #d32f2f;
    }
</style>
</head>

<body>

<div class="container">
    <h1>ЁЯФФ рдПрдХ рдорд┐рдиреЗрдЯ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рдкрд░реАрдХреНрд╖рдХ (1-Minute Notification Tester)</h1>
    <p>рдкрд░реАрдХреНрд╖рдг рд╕реБрд░реБ рдЧрд░реНрди рдмрдЯрди рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВрд▓реЗ рдмреНрд░рд╛рдЙрдЬрд░ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рдирдХреЛ рд▓рд╛рдЧрд┐ рдЕрдиреБрдорддрд┐ рджрд┐рдиреБрдкрд░реНрдиреЗрдЫред</p>
    
    <button onclick="requestNotificationPermission()">
        рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рдЕрдиреБрд░реЛрдз рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реН
    </button>
    
    <div id="status" class="status-message">
        рдЕрд╡рд╕реНрдерд╛: рдЕрдиреБрдорддрд┐ рдкрд░реНрдЦрдБрджреИ...
    </div>
</div>

<script>
    const statusDiv = document.getElementById('status');
    let notificationInterval = null;
    let notificationCount = 0;

    // 1. рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рдЕрдиреБрдорддрд┐ рдЕрдиреБрд░реЛрдз рдЧрд░реНрдиреЗ рдлрдВрдХреНрд╢рди
    function requestNotificationPermission() {
        if (!("Notification" in window)) {
            statusDiv.innerHTML = "рдЕрд╡рд╕реНрдерд╛: <span class='error'>рдпреЛ рдмреНрд░рд╛рдЙрдЬрд░рд▓реЗ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рдирд╣рд░реВрд▓рд╛рдИ рд╕рдорд░реНрдерди рдЧрд░реНрджреИрдиред</span>";
            return;
        }

        Notification.requestPermission().then(permission => {
            if (permission === "granted") {
                statusDiv.className = 'status-message';
                statusDiv.innerHTML = "рдЕрд╡рд╕реНрдерд╛: **рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рднрдпреЛред** рдЕрдм рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рдирд╣рд░реВ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреЗрдЫрдиреНред";
                startNotifications();
            } else if (permission === "denied") {
                statusDiv.className = 'status-message error';
                statusDiv.innerHTML = "рдЕрд╡рд╕реНрдерд╛: **рдЕрдиреБрдорддрд┐ рдЕрд╕реНрд╡реАрдХреГрддред** рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рдирд╣рд░реВ рдкрдард╛рдЙрди рд╕рдХрд┐рдБрджреИрдиред";
            } else {
                statusDiv.innerHTML = "рдЕрд╡рд╕реНрдерд╛: рдЕрдиреБрдорддрд┐ рдкрд░реНрдЦрдБрджреИ...";
            }
        });
    }

    // 2. рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рджреЗрдЦрд╛рдЙрдиреЗ рдлрдВрдХреНрд╢рди
    function showNotification() {
        notificationCount++;
        const options = {
            body: `рдпреЛ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рдкрд░реАрдХреНрд╖рдгрдХреЛ рд▓рд╛рдЧрд┐ рд╣реЛред рдХреБрд▓ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди: ${notificationCount}`,
            icon: 'https://img.icons8.com/color/48/000000/bell.png', // рдкрд░реАрдХреНрд╖рдгрдХреЛ рд▓рд╛рдЧрд┐ рдЖрдЗрдХрди
            tag: 'one-minute-test'
        };

        if (document.visibilityState === "visible") {
            // рдпрджрд┐ рдЯреНрдпрд╛рдм рд╕рдХреНрд░рд┐рдп рдЫ рднрдиреЗ, рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рджреЗрдЦрд╛рдЙрдиреБрдХреЛ рд╕рдЯреНрдЯрд╛ рдХрдиреНрд╕реЛрд▓рдорд╛ рд▓рдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред
            console.log(`[${new Date().toLocaleTimeString()}] New Notification Triggered (Tab Active): ${options.body}`);
            statusDiv.innerHTML = `рдЕрд╡рд╕реНрдерд╛: **рд╕рдлрд▓рддрд╛!** ${notificationCount} рдФрдВ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рдЯреНрд░рд┐рдЧрд░ рднрдпреЛ (рдЯреНрдпрд╛рдм рд╕рдХреНрд░рд┐рдп)ред`;
        } else {
            // рдпрджрд┐ рдЯреНрдпрд╛рдм рд╕рдХреНрд░рд┐рдп рдЫреИрди рднрдиреЗ, рдбреЗрд╕реНрдХрдЯрдк рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рджреЗрдЦрд╛рдЙрдиреБрд╣реЛрд╕реНред
            new Notification("ЁЯХТ рдирдпрд╛рдБ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди!", options);
            statusDiv.innerHTML = `рдЕрд╡рд╕реНрдерд╛: **рд╕рдлрд▓рддрд╛!** ${notificationCount} рдФрдВ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкрдард╛рдЗрдпреЛред`;
            console.log(`[${new Date().toLocaleTimeString()}] Desktop Notification Sent: ${options.body}`);
        }
    }

    // 3. рез рдорд┐рдиреЗрдЯрдХреЛ рдЕрдиреНрддрд░рд╛рд▓рдорд╛ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рд╕реБрд░реБ рдЧрд░реНрдиреЗ рдлрдВрдХреНрд╢рди
    function startNotifications() {
        // рдпрджрд┐ рдкрд╣рд┐рд▓реЗ рдиреИ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫ рднрдиреЗ, рддреНрдпрд╕рд▓рд╛рдИ рд░реЛрдХреНрдиреБрд╣реЛрд╕реН
        if (notificationInterval) {
            clearInterval(notificationInterval);
        }

        // рдкрд╣рд┐рд▓реЛ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╕рди рддреБрд░реБрдиреНрддреИ рджреЗрдЦрд╛рдЙрдиреБрд╣реЛрд╕реН
        showNotification(); 

        // рд╣рд░реЗрдХ 60000 рдорд┐рд▓рд┐рд╕реЗрдХреЗрдиреНрдб (1 рдорд┐рдиреЗрдЯ) рдорд╛ рдлрдВрдХреНрд╢рди рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН
        // 
        notificationInterval = setInterval(showNotification, 60000); 

        console.log("Notification interval started. Next notification in 60 seconds.");
    }
</script>

</body>
</html>
